# Конфигурация бота

## Переменные окружения

Все настройки бота хранятся в файле `.env` в корне проекта. Скопируйте `.env.example` в `.env` и заполните необходимые значения.

### Обязательные параметры

#### `TELEGRAM_BOT_TOKEN`
Токен вашего Telegram бота, полученный от [@BotFather](https://t.me/BotFather).

**Пример:**
```
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

#### `GIGACHAT_CLIENT_ID`
Client ID для доступа к GigaChat API. Получается при регистрации на [developers.sber.ru](https://developers.sber.ru/studio/login).

**Пример:**
```
GIGACHAT_CLIENT_ID=019a9589-e16d-7d1b-9285-55d5aa9da05c
```

#### `GIGACHAT_CLIENT_SECRET`
Client Secret (Authorization Key) для GigaChat API.

**Пример:**
```
GIGACHAT_CLIENT_SECRET=MDE5YTk1ODktZTE2ZC03ZDFiLTkyODUtNTVkNWFhOWRhMDVjOjc0YTEyMDk2LWMwN2EtNDdlOC04ZmViLTA1Mzk1OTE2YmNmYQ==
```

#### `OWNER_USER_ID`
Ваш Telegram User ID. Получить можно у бота [@userinfobot](https://t.me/userinfobot).

**Пример:**
```
OWNER_USER_ID=123456789
```

#### `ALLOWED_CHAT_IDS`
Список ID разрешенных чатов, где бот может работать. Разделяются запятой. Получить ID чата можно у бота [@getidsbot](https://t.me/getidsbot).

**Пример:**
```
ALLOWED_CHAT_IDS=-1001234567890,-1009876543210
```

### Настраиваемые параметры

Эти параметры можно изменять для настройки поведения бота под ваши нужды.

#### `RAFFLE_TIMER_SECONDS`
Время таймера розыгрыша в секундах. По истечении этого времени выбирается победитель.

- **По умолчанию:** `120` (2 минуты)
- **Минимальное значение:** рекомендуется не менее 30 секунд
- **Максимальное значение:** ограничений нет, но рекомендуется не более 600 секунд (10 минут)

**Примеры:**
```
RAFFLE_TIMER_SECONDS=120    # 2 минуты (по умолчанию)
RAFFLE_TIMER_SECONDS=60    # 1 минута
RAFFLE_TIMER_SECONDS=180   # 3 минуты
RAFFLE_TIMER_SECONDS=300   # 5 минут
```

#### `MAX_ACTIVE_RAFFLES`
Максимальное количество одновременных активных розыгрышей. При превышении лимита удаляется самый старый розыгрыш.

- **По умолчанию:** `5`
- **Минимальное значение:** `1`
- **Максимальное значение:** ограничений нет, но рекомендуется не более 10 для оптимальной производительности

**Примеры:**
```
MAX_ACTIVE_RAFFLES=5    # По умолчанию
MAX_ACTIVE_RAFFLES=3    # Меньше розыгрышей одновременно
MAX_ACTIVE_RAFFLES=10   # Больше розыгрышей одновременно
```

### Дополнительные параметры

#### `GIGACHAT_VERIFY_SSL`
Проверка SSL сертификатов при подключении к GigaChat API.

- **По умолчанию:** `false`
- **Значения:** `true` или `false`

**Пример:**
```
GIGACHAT_VERIFY_SSL=false
```

## Применение изменений

После изменения параметров в `.env` файле необходимо перезапустить бота:

```bash
make stop    # Остановить бота
make run     # Запустить бота с новыми настройками
```

## Рекомендации по настройке

### Для небольшой группы (до 20 человек)
- `RAFFLE_TIMER_SECONDS=60` - 1 минута достаточно
- `MAX_ACTIVE_RAFFLES=3` - меньше одновременных розыгрышей

### Для средней группы (20-50 человек)
- `RAFFLE_TIMER_SECONDS=120` - стандартные 2 минуты
- `MAX_ACTIVE_RAFFLES=5` - стандартное значение

### Для большой группы (более 50 человек)
- `RAFFLE_TIMER_SECONDS=180` - 3 минуты для большего времени на участие
- `MAX_ACTIVE_RAFFLES=7` - больше одновременных розыгрышей

## Безопасность

⚠️ **Важно:** Никогда не публикуйте файл `.env` в публичных репозиториях! Он содержит секретные данные (токены, ключи API).

Файл `.env` уже добавлен в `.gitignore` и не будет случайно закоммичен.

